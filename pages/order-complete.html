<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Complete - WEVERSE</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        /* ÏäπÍ∏â ÏïåÎ¶º Ïä§ÌÉÄÏùº */
        .promotion-alert {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%);
            border: 2px solid #a855f7;
            border-radius: 16px;
            padding: 2rem;
            margin: 1.5rem 0;
            text-align: center;
            animation: promotionPulse 2s ease-in-out infinite;
        }

        @keyframes promotionPulse {
            0%, 100% { box-shadow: 0 0 20px rgba(168, 85, 247, 0.3); }
            50% { box-shadow: 0 0 40px rgba(168, 85, 247, 0.6); }
        }

        .promotion-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%);
            border-radius: 50%;
            margin-bottom: 1rem;
        }

        .promotion-icon svg {
            stroke: #fff;
            fill: rgba(255,255,255,0.2);
        }

        .promotion-alert h2 {
            font-size: 1.5rem;
            color: #a855f7;
            margin-bottom: 0.5rem;
        }

        .promotion-alert p {
            font-size: 1.1rem;
            color: var(--text-primary, #333);
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <!-- Scroll Progress Bar -->
    <div class="scroll-progress"></div>

    <!-- Loader -->
    <div class="loader" id="loader">
        <div class="loader-text">
            <span>W</span><span>E</span><span>V</span><span>E</span><span>R</span><span>S</span><span>E</span>
        </div>
    </div>

    <!-- Custom Cursor -->
    <div class="cursor" id="cursor"></div>
    <div class="cursor-dot" id="cursorDot"></div>

    <!-- Header -->
    <header class="header" id="header">
        <div class="container">
            <div class="header-inner">
                <a href="../index.html" class="logo">WE<span>V</span>ERSE</a>
                <nav class="nav" id="nav">
                    <a href="../index.html" data-i18n="nav.main">Main</a>
                    <a href="company.html" data-i18n="nav.company">Company</a>
                    <a href="product.html" data-i18n="nav.product">Product</a>
                    <a href="shopping.html" data-i18n="nav.shop">Shop</a>
                    <a href="login.html" class="nav-auth" data-i18n="nav.login">Login</a>
                    <a href="cart.html" class="nav-cart">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="9" cy="21" r="1"/>
                            <circle cx="20" cy="21" r="1"/>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                        </svg>
                        <span class="cart-count" id="cartCount">0</span>
                    </a>
                </nav>
                <div class="nav-toggle" id="navToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Order Complete Content -->
    <section class="order-complete-section">
        <div class="container">
            <div class="order-complete" data-animate>
                <!-- Success Icon -->
                <div class="order-success-icon">
                    <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M8 12l3 3 5-6"/>
                    </svg>
                </div>

                <!-- Success Message -->
                <h1>Thank You for Your Order!</h1>
                <p class="order-message">Your order has been successfully placed.</p>

                <!-- ÏäπÍ∏â ÏïåÎ¶º (14,400PV Ïù¥ÏÉÅ ÌïúÎ∞© Îß§Ï∂ú Ïãú) -->
                <div class="promotion-alert" id="promotionAlert" style="display: none;">
                    <div class="promotion-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                        </svg>
                    </div>
                    <h2 id="promotionTitle">Ï∂ïÌïòÌï©ÎãàÎã§!</h2>
                    <p id="promotionMessage"></p>
                </div>
                <script>
                    // Ï¶âÏãú Ïã§Ìñâ - ÏäπÍ∏â ÏïåÎ¶º Ï≤¥ÌÅ¨
                    (function() {
                        var promo = localStorage.getItem('weversePromotion');
                        if (promo) {
                            var data = JSON.parse(promo);
                            var alertBox = document.getElementById('promotionAlert');
                            var title = document.getElementById('promotionTitle');
                            var msg = document.getElementById('promotionMessage');
                            title.textContent = 'üéâ Ï∂ïÌïòÌï©ÎãàÎã§, ' + data.memberName + 'Îãò!';
                            msg.innerHTML = '<strong>' + data.reason + '</strong>ÏúºÎ°ú<br><span style="color: #a855f7; font-weight: 600;">' + data.newRankName + '</span> ÏßÅÍ∏âÏúºÎ°ú ÏäπÍ∏âÎêòÏóàÏäµÎãàÎã§!';
                            alertBox.style.display = 'block';
                            localStorage.removeItem('weversePromotion');
                        }
                    })();
                </script>

                <!-- Order Number -->
                <div class="order-number-box">
                    <span>Order Number</span>
                    <strong id="orderNumber">-</strong>
                </div>

                <!-- Order Details Grid -->
                <div class="order-details-grid">
                    <!-- Order Items -->
                    <div class="order-detail-card" data-animate data-delay="1">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/>
                                <line x1="3" y1="6" x2="21" y2="6"/>
                                <path d="M16 10a4 4 0 01-8 0"/>
                            </svg>
                            Order Items
                        </h3>
                        <div class="order-items-list" id="orderItems">
                            <!-- Items will be rendered by JavaScript -->
                        </div>
                    </div>

                    <!-- Shipping Information -->
                    <div class="order-detail-card" data-animate data-delay="2">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="1" y="3" width="15" height="13"/>
                                <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/>
                                <circle cx="5.5" cy="18.5" r="2.5"/>
                                <circle cx="18.5" cy="18.5" r="2.5"/>
                            </svg>
                            Shipping Address
                        </h3>
                        <div class="order-shipping-info" id="shippingInfo">
                            <!-- Shipping info will be rendered by JavaScript -->
                        </div>
                    </div>

                    <!-- Payment Summary -->
                    <div class="order-detail-card" data-animate data-delay="3">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="1" y="4" width="22" height="16" rx="2"/>
                                <line x1="1" y1="10" x2="23" y2="10"/>
                            </svg>
                            Payment Summary
                        </h3>
                        <div class="order-payment-summary">
                            <div class="summary-row">
                                <span>Subtotal</span>
                                <span id="orderSubtotal">$0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Shipping</span>
                                <span id="orderShipping">FREE</span>
                            </div>
                            <div class="summary-row discount" id="orderDiscountRow" style="display: none;">
                                <span>Discount</span>
                                <span id="orderDiscount">-$0.00</span>
                            </div>
                            <div class="summary-row total">
                                <span>Total Paid</span>
                                <span id="orderTotal">$0.00</span>
                            </div>
                            <div class="payment-method-info">
                                <span>Payment Method:</span>
                                <strong id="paymentMethod">Credit Card</strong>
                            </div>
                        </div>
                    </div>

                    <!-- What's Next -->
                    <div class="order-detail-card" data-animate data-delay="4">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                            What's Next?
                        </h3>
                        <div class="order-next-steps">
                            <div class="next-step">
                                <span class="step-number">1</span>
                                <div class="step-content">
                                    <strong>Order Confirmation</strong>
                                    <p>Your order has been confirmed.</p>
                                </div>
                            </div>
                            <div class="next-step">
                                <span class="step-number">2</span>
                                <div class="step-content">
                                    <strong>Processing</strong>
                                    <p>Your order will be processed within 1-2 business days.</p>
                                </div>
                            </div>
                            <div class="next-step">
                                <span class="step-number">3</span>
                                <div class="step-content">
                                    <strong>Shipping</strong>
                                    <p>You'll receive tracking information once shipped.</p>
                                </div>
                            </div>
                            <div class="next-step">
                                <span class="step-number">4</span>
                                <div class="step-content">
                                    <strong>Delivery</strong>
                                    <p>Estimated delivery: 5-7 business days.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="order-actions" data-animate data-delay="5">
                    <a href="shopping.html" class="btn btn-primary">Continue Shopping</a>
                    <button class="btn btn-outline" onclick="window.print()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <polyline points="6 9 6 2 18 2 18 9"/>
                            <path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"/>
                            <rect x="6" y="14" width="12" height="8"/>
                        </svg>
                        Print Receipt
                    </button>
                </div>

                <!-- Contact Info -->
                <div class="order-contact" data-animate data-delay="6">
                    <p>Questions about your order? Contact us at</p>
                    <a href="mailto:weverse.one@gmail.com">weverse.one@gmail.com</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <a href="../index.html" class="logo">WE<span>V</span>ERSE</a>
                    <p data-i18n="footer.desc">Premium healthcare that elevates the value of life. Where science meets innovation to create your healthier tomorrow.</p>
                </div>
                <div class="footer-col">
                    <h4 class="footer-title" data-i18n="footer.menu">Menu</h4>
                    <div class="footer-links">
                        <a href="../index.html" data-i18n="nav.main">Main</a>
                        <a href="company.html" data-i18n="nav.company">Company</a>
                        <a href="product.html" data-i18n="nav.product">Product</a>
                        <a href="shopping.html" data-i18n="nav.shop">Shop</a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4 class="footer-title" data-i18n="footer.products">Products</h4>
                    <div class="footer-links">
                        <a href="products/alpha-gpc.html">Alpha GPC</a>
                        <a href="products/nano-lutein.html">Nano Lutein</a>
                        <a href="products/super-prostaid.html">Super Prost Aid</a>
                        <a href="products/joint-care.html">Joint Care</a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4 class="footer-title" data-i18n="footer.contact">Contact</h4>
                    <div class="footer-links">
                        <a href="mailto:weverse.one@gmail.com">weverse.one@gmail.com</a>
                        <a href="#">Singapore</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="footer-copyright" data-i18n="footer.copyright">&copy; 2025 WEVERSE. All rights reserved.</p>
                </div>
        </div>
    </footer>
    <!-- Floating Action Button -->
    <div class="fab-container" id="fabContainer">
        <a href="cart.html" class="fab-item fab-cart" title="Cart">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="9" cy="21" r="1"/>
                <circle cx="20" cy="21" r="1"/>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
            </svg>
            <span class="fab-cart-count" id="fabCartCount">0</span>
        </a>
        <a href="account.html" class="fab-item fab-account" title="My Account">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
        </a>
        <button class="fab-item fab-lang" id="fabLang" title="Language" onclick="toggleLanguage()">‰∏≠</button>

        <button class="fab-toggle" id="fabToggle" aria-label="Quick Menu">
            <svg class="fab-icon-menu" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="1"/>
                <circle cx="12" cy="5" r="1"/>
                <circle cx="12" cy="19" r="1"/>
            </svg>
            <svg class="fab-icon-close" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        </button>
    </div>



    <script src="../js/main.js"></script>
    <script>
        // Get order data from localStorage
        function loadOrderData() {
            const orderData = JSON.parse(localStorage.getItem('weverseLastOrder'));

            if (!orderData) {
                // No order data, redirect to shop
                window.location.href = 'shopping.html';
                return;
            }

            // Order Number
            document.getElementById('orderNumber').textContent = orderData.orderNumber;

            // Order Items
            const orderItemsContainer = document.getElementById('orderItems');
            orderItemsContainer.innerHTML = orderData.items.map(item => `
                <div class="order-item">
                    <span class="item-name">${item.name}</span>
                    <span class="item-details">Qty: ${item.quantity} √ó $${item.price.toFixed(2)}</span>
                    <span class="item-total">$${(item.price * item.quantity).toFixed(2)}</span>
                </div>
            `).join('');

            // Shipping Info
            const shippingContainer = document.getElementById('shippingInfo');
            shippingContainer.innerHTML = `
                <p class="shipping-name">${orderData.shipping.fullName}</p>
                <p>${orderData.shipping.address}</p>
                <p>${orderData.shipping.city}, ${orderData.shipping.state} ${orderData.shipping.zipcode}</p>
                <p>${orderData.shipping.country}</p>
            `;

            // Payment Summary
            document.getElementById('orderSubtotal').textContent = `$${orderData.subtotal.toFixed(2)}`;
            document.getElementById('orderShipping').textContent = orderData.shippingCost === 0 ? 'FREE' : `$${orderData.shippingCost.toFixed(2)}`;

            if (orderData.discount > 0) {
                document.getElementById('orderDiscountRow').style.display = 'flex';
                document.getElementById('orderDiscount').textContent = `-$${orderData.discountAmount.toFixed(2)}`;
            }

            document.getElementById('orderTotal').textContent = `$${orderData.total.toFixed(2)}`;

            // Payment Method
            const paymentMethodNames = {
                'card': 'Credit / Debit Card',
                'paypal': 'PayPal',
                'bank': 'Bank Transfer'
            };
            document.getElementById('paymentMethod').textContent = paymentMethodNames[orderData.paymentMethod] || 'Credit Card';

            // Clear the order data after displaying (optional - keep for order history)
            // localStorage.removeItem('weverseLastOrder');
        }

        // ÏäπÍ∏â ÏïåÎ¶º ÌëúÏãú
        function showPromotionAlert(promotion) {
            if (!promotion || !promotion.promoted) return;

            const alertEl = document.getElementById('promotionAlert');
            const titleEl = document.getElementById('promotionTitle');
            const messageEl = document.getElementById('promotionMessage');

            titleEl.textContent = `üéâ Ï∂ïÌïòÌï©ÎãàÎã§, ${promotion.memberName}Îãò!`;
            messageEl.innerHTML = `
                <strong>${promotion.reason}</strong>ÏúºÎ°ú<br>
                <span style="color: #a855f7; font-weight: 600;">${promotion.newRankName}</span> ÏßÅÍ∏âÏúºÎ°ú ÏäπÍ∏âÎêòÏóàÏäµÎãàÎã§!
            `;

            alertEl.style.display = 'block';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadOrderData();

            // ÏäπÍ∏â ÏïåÎ¶º Ï≤¥ÌÅ¨ (Î≥ÑÎèÑ ÌÇ§ÏóêÏÑú ÏùΩÏùå)
            const promotionData = localStorage.getItem('weversePromotion');
            console.log('[OrderComplete] ÏäπÍ∏â Ï†ïÎ≥¥:', promotionData);

            if (promotionData) {
                const promotion = JSON.parse(promotionData);
                console.log('[OrderComplete] ÏäπÍ∏â ÏïåÎ¶º ÌëúÏãú!', promotion);
                showPromotionAlert(promotion);
                // ÏïåÎ¶º ÌëúÏãú ÌõÑ ÏÇ≠Ï†ú (Ìïú Î≤àÎßå ÌëúÏãú)
                localStorage.removeItem('weversePromotion');
            } else {
                console.log('[OrderComplete] ÏäπÍ∏â Ï†ïÎ≥¥ ÏóÜÏùå');
            }

            // Animate elements
            setTimeout(() => {
                document.querySelectorAll('[data-animate]').forEach((el, index) => {
                    setTimeout(() => {
                        el.classList.add('animated');
                    }, index * 100);
                });
            }, 100);
        });
    </script>
</body>
</html>
